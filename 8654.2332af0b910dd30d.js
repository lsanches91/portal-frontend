"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8654],{8654:(Z,f,r)=>{r.r(f),r.d(f,{CadastroPageModule:()=>y});var m=r(6814),u=r(95),C=r(5233),s=r(3582),p=r(3044),d=r(5861),e=r(6689),h=r(6080),g=r(7696),v=r(9393),P=r(83),S=r(2321);function E(l,M){if(1&l&&(e.TgZ(0,"ion-select-option",18),e._uU(1),e.qZA()),2&l){const a=M.$implicit;e.s9C("value",a.sigla),e.xp6(1),e.Oqu(a.nome)}}function A(l,M){if(1&l&&(e.TgZ(0,"ion-select-option",18),e._uU(1),e.qZA()),2&l){const a=M.$implicit;e.s9C("value",a.id),e.xp6(1),e.Oqu(a.nome)}}const U=[{path:"",component:(()=>{class l{constructor(a,i,n,t,o,c){this.utilsService=a,this.usuarioService=i,this.estadoService=n,this.cidadeService=t,this.geolocalizacaoService=o,this.router=c,this.nome="",this.cpf="",this.celular="",this.email="",this.senha="",this.confirmaSenha="",this.cep="",this.logradouro="",this.bairro="",this.numero="",this.nivel="C",this.situacao="P",this.estados=[],this.cidades=[],this.estadoSelecionado="",this.cidadeSelecionada="",this.cidadeSelecionada_id="",this.selectDisabled=!0,this.cpfMask={mask:[/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"-",/\d/,/\d/]},this.telMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cepMask={mask:[/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/]},this.maskPredicate=function(){var _=(0,d.Z)(function*(T){return T.getInputElement()});return function(T){return _.apply(this,arguments)}}(),this.estadoService.getAll().then(_=>{this.estados=_}).catch(_=>{console.log(_)})}verificaEstados(){var a=this;return(0,d.Z)(function*(){a.estadoService.getAll().then(function(){var i=(0,d.Z)(function*(n){0==n.length&&(a.utilsService.presentToast("Importando estados e cidades, isso pode demorar um pouco..."),yield a.estadoService.importEstados(),yield a.cidadeService.importCidades())});return function(n){return i.apply(this,arguments)}}()).catch(i=>{console.log(i)})})()}ngOnInit(){}cadastrar(){var a=this;return(0,d.Z)(function*(){if(""==a.nome||""==a.cpf||""==a.celular||""==a.email||""==a.senha||""==a.confirmaSenha||""==a.cep||""==a.logradouro||""==a.bairro||""==a.numero||""==a.estadoSelecionado||""==a.cidadeSelecionada)console.log(a.nome,a.cpf,a.celular,a.email,a.senha,a.confirmaSenha,a.cep,a.logradouro,a.bairro,a.numero,a.cidadeSelecionada,a.estadoSelecionado),a.utilsService.presentToastWarning("Preencha todos os campos");else if(a.validarCPF(a.cpf))if(a.validarEmail(a.email))if(a.senha!=a.confirmaSenha)a.utilsService.presentToastWarning("As senhas est\xe3o divergentes");else{var i={nome:a.nome,cpf:a.cpf,telefone:a.celular,logradouro:a.logradouro,numero:a.numero,bairro:a.bairro,cidade_id:parseInt(a.cidadeSelecionada_id),cep:a.cep,email:a.email,senha:a.senha,nivel:a.nivel,imagem_path:null,situacao:a.situacao};(yield a.usuarioService.cadastrar(i))&&(a.utilsService.presentToastSuccess("Usu\xe1rio cadastrado com sucesso!"),a.router.navigate(["/perfil"]))}else a.utilsService.presentToastWarning("O E-mail inserido \xe9 inv\xe1lido");else a.utilsService.presentToastWarning("O CPF inserido \xe9 inv\xe1lido")})()}buscarEndereco(){var a=this;return(0,d.Z)(function*(){if(""==a.cep)a.utilsService.presentToastWarning("Preencha o CEP");else{let i=parseInt(a.cep.replace(/\D/g,""));yield a.geolocalizacaoService.getAddresByCEP(i).then(function(){var n=(0,d.Z)(function*(t){a.logradouro=t.logradouro,a.bairro=t.bairro,yield a.cidadeService.getCidadeByNome(t.uf,t.localidade).then(o=>{a.cidadeSelecionada=o.nome,a.cidadeSelecionada_id=o.id,a.estadoSelecionado=o.estado_sigla,a.selectDisabled=!1})});return function(t){return n.apply(this,arguments)}}())}})()}onEstadoChange(a){this.cidadeService.getCidadeByEstado(a.detail.value).then(n=>{this.cidades=n||{},this.cidadeSelecionada="",this.selectDisabled=!1}).catch(n=>{console.log(n)})}onCidadeChange(a){this.cidadeService.getCidadeById(a.detail.value).then(n=>{this.cidadeSelecionada=n.nome,console.log(this.cidadeSelecionada)}).catch(n=>{this.utilsService.presentToastError(n.error.error)})}validarCPF(a){if(11!==(a=a.replace(/\D/g,"")).length||/^(\d)\1{10}$/.test(a))return!1;let i=0;for(let c=0;c<9;c++)i+=parseInt(a.charAt(c))*(10-c);let n=i%11;if((n<2?0:11-n)!==parseInt(a.charAt(9)))return!1;i=0;for(let c=0;c<10;c++)i+=parseInt(a.charAt(c))*(11-c);return n=i%11,(n<2?0:11-n)===parseInt(a.charAt(10))}validarEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}static#e=this.\u0275fac=function(i){return new(i||l)(e.Y36(h.FW),e.Y36(g.i),e.Y36(v.s),e.Y36(P.F),e.Y36(S.z),e.Y36(p.F0))};static#a=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-cadastro"]],decls:81,vars:24,consts:[["slot","start"],["default-href","#"],[3,"fullscreen"],["labelPlacement","floating","placeholder","Insira o nome","required","",3,"ngModel","ngModelChange"],["slot","label"],["color","danger"],["labelPlacement","floating","placeholder","Insira o CPF","required","",3,"maskito","maskitoElement","ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o n\xfamero de celular",3,"maskito","maskitoElement","ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o e-mail","type","email","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira a senha","type","password","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o CEP","required","",3,"ngModel","maskito","maskitoElement","ngModelChange"],["labelPlacement","floating","placeholder","Insira a logradouro","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o numero","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira a bairro","required","",2,"width","150%",3,"ngModel","ngModelChange"],["label-placement","floating",3,"ngModel","placeholder","ngModelChange","ionChange","click"],[3,"value",4,"ngFor","ngForOf"],["label-placement","stacked",3,"disabled","ngModel","placeholder","ngModelChange","click","ionChange"],["color","success","expand","block",3,"click"],[3,"value"]],template:function(i,n){1&i&&(e.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),e._UZ(2,"ion-back-button",1),e.qZA(),e.TgZ(3,"ion-title"),e._uU(4,"Cadastro"),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-card")(7,"ion-item")(8,"ion-input",3),e.NdJ("ngModelChange",function(o){return n.nome=o}),e.TgZ(9,"div",4),e._uU(10,"Nome"),e.TgZ(11,"ion-text",5),e._uU(12,"*"),e.qZA()()()(),e.TgZ(13,"ion-item")(14,"ion-input",6),e.NdJ("ngModelChange",function(o){return n.cpf=o}),e.TgZ(15,"div",4),e._uU(16,"CPF"),e.TgZ(17,"ion-text",5),e._uU(18,"*"),e.qZA()()()(),e.TgZ(19,"ion-item")(20,"ion-input",7),e.NdJ("ngModelChange",function(o){return n.celular=o}),e.TgZ(21,"div",4),e._uU(22,"Celular"),e.TgZ(23,"ion-text",5),e._uU(24,"*"),e.qZA()()()(),e.TgZ(25,"ion-item")(26,"ion-input",8),e.NdJ("ngModelChange",function(o){return n.email=o}),e.TgZ(27,"div",4),e._uU(28,"E-mail"),e.TgZ(29,"ion-text",5),e._uU(30,"*"),e.qZA()()()(),e.TgZ(31,"ion-item")(32,"ion-input",9),e.NdJ("ngModelChange",function(o){return n.senha=o}),e.TgZ(33,"div",4),e._uU(34,"Senha"),e.TgZ(35,"ion-text",5),e._uU(36,"*"),e.qZA()()()(),e.TgZ(37,"ion-item")(38,"ion-input",9),e.NdJ("ngModelChange",function(o){return n.confirmaSenha=o}),e.TgZ(39,"div",4),e._uU(40,"Confirmar Senha"),e.TgZ(41,"ion-text",5),e._uU(42,"*"),e.qZA()()()(),e.TgZ(43,"ion-item")(44,"ion-input",10),e.NdJ("ngModelChange",function(o){return n.cep=o}),e.TgZ(45,"div",4),e._uU(46,"CEP"),e.TgZ(47,"ion-text",5),e._uU(48,"*"),e.qZA()()()(),e.TgZ(49,"ion-item")(50,"ion-input",11),e.NdJ("ngModelChange",function(o){return n.logradouro=o}),e.TgZ(51,"div",4),e._uU(52,"Logradouro"),e.TgZ(53,"ion-text",5),e._uU(54,"*"),e.qZA()()()(),e.TgZ(55,"ion-item")(56,"ion-input",12),e.NdJ("ngModelChange",function(o){return n.numero=o}),e.TgZ(57,"div",4),e._uU(58,"N\xfamero"),e.TgZ(59,"ion-text",5),e._uU(60,"*"),e.qZA()()(),e.TgZ(61,"ion-input",13),e.NdJ("ngModelChange",function(o){return n.bairro=o}),e.TgZ(62,"div",4),e._uU(63,"Bairro"),e.TgZ(64,"ion-text",5),e._uU(65,"*"),e.qZA()()()(),e.TgZ(66,"ion-item")(67,"ion-select",14),e.NdJ("ngModelChange",function(o){return n.estadoSelecionado=o})("ionChange",function(o){return n.onEstadoChange(o)})("click",function(){return n.verificaEstados()}),e.TgZ(68,"div",4),e._uU(69,"Estado"),e.TgZ(70,"ion-text",5),e._uU(71,"*"),e.qZA()(),e.YNc(72,E,2,2,"ion-select-option",15),e.qZA(),e.TgZ(73,"ion-select",16),e.NdJ("ngModelChange",function(o){return n.cidadeSelecionada_id=o})("click",function(){return n.verificaEstados()})("ionChange",function(o){return n.onCidadeChange(o)}),e.TgZ(74,"div",4),e._uU(75,"Cidade"),e.TgZ(76,"ion-text",5),e._uU(77,"*"),e.qZA()(),e.YNc(78,A,2,2,"ion-select-option",15),e.qZA()(),e.TgZ(79,"ion-button",17),e.NdJ("click",function(){return n.cadastrar()}),e._uU(80,"Cadastrar"),e.qZA()()()),2&i&&(e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngModel",n.nome),e.xp6(6),e.Q6J("maskito",n.cpfMask)("maskitoElement",n.maskPredicate)("ngModel",n.cpf),e.xp6(6),e.Q6J("maskito",n.telMask)("maskitoElement",n.maskPredicate)("ngModel",n.celular),e.xp6(6),e.Q6J("ngModel",n.email),e.xp6(6),e.Q6J("ngModel",n.senha),e.xp6(6),e.Q6J("ngModel",n.confirmaSenha),e.xp6(6),e.Q6J("ngModel",n.cep)("maskito",n.cepMask)("maskitoElement",n.maskPredicate),e.xp6(6),e.Q6J("ngModel",n.logradouro),e.xp6(6),e.Q6J("ngModel",n.numero),e.xp6(5),e.Q6J("ngModel",n.bairro),e.xp6(6),e.Q6J("ngModel",n.estadoSelecionado)("placeholder",n.estadoSelecionado),e.xp6(5),e.Q6J("ngForOf",n.estados),e.xp6(1),e.Q6J("disabled",n.selectDisabled)("ngModel",n.cidadeSelecionada_id)("placeholder",n.cidadeSelecionada),e.xp6(5),e.Q6J("ngForOf",n.cidades))},dependencies:[m.sg,u.JJ,u.Q7,u.On,s.YG,s.Sm,s.PM,s.W2,s.pK,s.Ie,s.t9,s.n0,s.yW,s.wd,s.sr,s.QI,s.j9,s.oU,C.ro],styles:["ion-item[_ngcontent-%COMP%]{padding:5px}ion-button[_ngcontent-%COMP%]{margin:10px}"]})}return l})()}];let J=(()=>{class l{static#e=this.\u0275fac=function(i){return new(i||l)};static#a=this.\u0275mod=e.oAB({type:l});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(U),p.Bz]})}return l})(),y=(()=>{class l{static#e=this.\u0275fac=function(i){return new(i||l)};static#a=this.\u0275mod=e.oAB({type:l});static#n=this.\u0275inj=e.cJS({imports:[m.ez,u.u5,s.Pc,C.U5,J]})}return l})()},2321:(Z,f,r)=>{r.d(f,{z:()=>p});var m=r(5861),u=r(6689),C=r(9862),s=r(6080);let p=(()=>{class d{constructor(h,g){this.http=h,this.utilsService=g,this.retorno={}}getAddres(h,g){var v=this;return(0,m.Z)(function*(){return v.http.get(`https://api.geoapify.com/v1/geocode/reverse?lat=${h}&lon=${g}&apiKey=e1c1fc95d3934d288f9fbadedeed9d1b`).toPromise()})()}getAddresByCEP(h){var g=this;return(0,m.Z)(function*(){return g.http.get(`https://viacep.com.br/ws/${h}/json/ `).toPromise()})()}static#e=this.\u0275fac=function(g){return new(g||d)(u.LFG(C.eN),u.LFG(s.FW))};static#a=this.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);