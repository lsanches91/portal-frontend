"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4543],{4543:(Z,f,r)=>{r.r(f),r.d(f,{CadastrarUsuarioPageModule:()=>b});var m=r(6814),g=r(95),C=r(5233),l=r(3582),_=r(3044),d=r(5861),e=r(6689),h=r(6080),u=r(7696),v=r(9393),U=r(83),P=r(2321);function S(s,M){if(1&s&&(e.TgZ(0,"ion-select-option",23),e._uU(1),e.qZA()),2&s){const a=M.$implicit;e.s9C("value",a.sigla),e.xp6(1),e.Oqu(a.nome)}}function A(s,M){if(1&s&&(e.TgZ(0,"ion-select-option",23),e._uU(1),e.qZA()),2&s){const a=M.$implicit;e.s9C("value",a.id),e.xp6(1),e.Oqu(a.nome)}}const E=[{path:"",component:(()=>{class s{constructor(a,o,n,t,i,c){this.utilsService=a,this.usuarioService=o,this.estadoService=n,this.cidadeService=t,this.geolocalizacaoService=i,this.router=c,this.nome="",this.cpf="",this.celular="",this.email="",this.senha="",this.confirmaSenha="",this.cep="",this.logradouro="",this.bairro="",this.numero="",this.cidade="",this.nivel="C",this.situacao="A",this.estados=[],this.cidades=[],this.estadoSelecionado="",this.cidadeSelecionada="",this.cidadeSelecionada_id="",this.selectDisabled=!0,this.cpfMask={mask:[/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"-",/\d/,/\d/]},this.telMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.cepMask={mask:[/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/]},this.maskPredicate=function(){var p=(0,d.Z)(function*(T){return T.getInputElement()});return function(T){return p.apply(this,arguments)}}(),this.estadoService.getAll().then(p=>{this.estados=p}).catch(p=>{console.log(p)})}ngOnInit(){}cadastrar(){var a=this;return(0,d.Z)(function*(){if(""==a.nome||""==a.cpf||""==a.celular||""==a.email||""==a.senha||""==a.confirmaSenha||""==a.cep||""==a.logradouro||""==a.bairro||""==a.numero||""==a.estadoSelecionado||""==a.cidadeSelecionada)console.log(a.nome,a.cpf,a.celular,a.email,a.senha,a.confirmaSenha,a.cep,a.logradouro,a.bairro,a.numero,a.cidadeSelecionada,a.estadoSelecionado),a.utilsService.presentToastWarning("Preencha todos os campos");else if(a.validarCPF(a.cpf))if(a.validarEmail(a.email))if(a.senha!=a.confirmaSenha)a.utilsService.presentToastWarning("As senhas est\xe3o divergentes");else{var o={nome:a.nome,cpf:a.cpf,telefone:a.celular,logradouro:a.logradouro,numero:a.numero,bairro:a.bairro,cidade_id:parseInt(a.cidadeSelecionada_id),cep:a.cep,email:a.email,senha:a.senha,nivel:a.nivel,imagem_path:null,situacao:a.situacao};(yield a.usuarioService.cadastrar(o))&&(a.utilsService.presentToastSuccess("Usu\xe1rio cadastrado com sucesso!"),a.router.navigate(["/listar-usuario"]))}else a.utilsService.presentToastWarning("O E-mail inserido \xe9 inv\xe1lido");else a.utilsService.presentToastWarning("O CPF inserido \xe9 inv\xe1lido")})()}verificaEstados(){var a=this;return(0,d.Z)(function*(){a.estadoService.getAll().then(function(){var o=(0,d.Z)(function*(n){0==n.length&&(a.utilsService.presentToast("Importando estados e cidades, isso pode demorar um pouco..."),yield a.estadoService.importEstados(),yield a.cidadeService.importCidades())});return function(n){return o.apply(this,arguments)}}()).catch(o=>{console.log(o)})})()}buscarEndereco(){var a=this;return(0,d.Z)(function*(){if(""==a.cep)a.utilsService.presentToastWarning("Preencha o CEP");else{let o=parseInt(a.cep.replace(/\D/g,""));yield a.geolocalizacaoService.getAddresByCEP(o).then(function(){var n=(0,d.Z)(function*(t){a.logradouro=t.logradouro,a.bairro=t.bairro,yield a.cidadeService.getCidadeByNome(t.uf,t.localidade).then(i=>{a.cidadeSelecionada=i.nome,a.cidadeSelecionada_id=i.id,a.estadoSelecionado=i.estado_sigla,a.selectDisabled=!1})});return function(t){return n.apply(this,arguments)}}())}})()}onEstadoChange(a){this.cidadeService.getCidadeByEstado(a.detail.value).then(n=>{this.cidades=n||{},this.cidadeSelecionada="",this.selectDisabled=!1}).catch(n=>{console.log(n)})}validarCPF(a){if(11!==(a=a.replace(/\D/g,"")).length||/^(\d)\1{10}$/.test(a))return!1;let o=0;for(let c=0;c<9;c++)o+=parseInt(a.charAt(c))*(10-c);let n=o%11;if((n<2?0:11-n)!==parseInt(a.charAt(9)))return!1;o=0;for(let c=0;c<10;c++)o+=parseInt(a.charAt(c))*(11-c);return n=o%11,(n<2?0:11-n)===parseInt(a.charAt(10))}validarEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}onCidadeChange(a){this.cidadeService.getCidadeById(a.detail.value).then(n=>{this.cidadeSelecionada=n.nome,console.log(this.cidadeSelecionada)}).catch(n=>{this.utilsService.presentToastError(n.error.error)})}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(h.FW),e.Y36(u.i),e.Y36(v.s),e.Y36(U.F),e.Y36(P.z),e.Y36(_.F0))};static#a=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-cadastrar-usuario"]],decls:96,vars:26,consts:[["slot","start"],["default-href","#"],[3,"fullscreen"],["labelPlacement","floating","placeholder","Insira o nome","required","",3,"ngModel","ngModelChange"],["slot","label"],["color","danger"],["labelPlacement","floating","placeholder","Insira o CPF","required","",3,"maskito","maskitoElement","ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o n\xfamero de celular",3,"maskito","maskitoElement","ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o e-mail","type","email","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira a senha","type","password","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o CEP","required","",3,"ngModel","maskito","maskitoElement","ngModelChange"],["labelPlacement","floating","placeholder","Insira a logradouro","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira o numero","required","",3,"ngModel","ngModelChange"],["labelPlacement","floating","placeholder","Insira a bairro","required","",2,"width","150%",3,"ngModel","ngModelChange"],["label-placement","floating",3,"ngModel","placeholder","ngModelChange","ionChange","click"],[3,"value",4,"ngFor","ngForOf"],["label-placement","stacked",3,"disabled","ngModel","placeholder","ngModelChange","click","ionChange"],["label","Situa\xe7\xe3o*","label-placement","floating","searchable","true","searchIcon","search",3,"ngModel","ngModelChange"],["value","A"],["value","P"],["label","N\xedvel de Acesso*","label-placement","floating","searchable","true","searchIcon","search",3,"ngModel","ngModelChange"],["value","C"],["color","success","expand","block",3,"click"],[3,"value"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),e._UZ(2,"ion-back-button",1),e.qZA(),e.TgZ(3,"ion-title"),e._uU(4,"Cadastro de Usu\xe1rio"),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-card")(7,"ion-item")(8,"ion-input",3),e.NdJ("ngModelChange",function(i){return n.nome=i}),e.TgZ(9,"div",4),e._uU(10,"Nome"),e.TgZ(11,"ion-text",5),e._uU(12,"*"),e.qZA()()()(),e.TgZ(13,"ion-item")(14,"ion-input",6),e.NdJ("ngModelChange",function(i){return n.cpf=i}),e.TgZ(15,"div",4),e._uU(16,"CPF"),e.TgZ(17,"ion-text",5),e._uU(18,"*"),e.qZA()()()(),e.TgZ(19,"ion-item")(20,"ion-input",7),e.NdJ("ngModelChange",function(i){return n.celular=i}),e.TgZ(21,"div",4),e._uU(22,"Celular"),e.TgZ(23,"ion-text",5),e._uU(24,"*"),e.qZA()()()(),e.TgZ(25,"ion-item")(26,"ion-input",8),e.NdJ("ngModelChange",function(i){return n.email=i}),e.TgZ(27,"div",4),e._uU(28,"E-mail"),e.TgZ(29,"ion-text",5),e._uU(30,"*"),e.qZA()()()(),e.TgZ(31,"ion-item")(32,"ion-input",9),e.NdJ("ngModelChange",function(i){return n.senha=i}),e.TgZ(33,"div",4),e._uU(34,"Senha"),e.TgZ(35,"ion-text",5),e._uU(36,"*"),e.qZA()()()(),e.TgZ(37,"ion-item")(38,"ion-input",9),e.NdJ("ngModelChange",function(i){return n.confirmaSenha=i}),e.TgZ(39,"div",4),e._uU(40,"Confirmar Senha"),e.TgZ(41,"ion-text",5),e._uU(42,"*"),e.qZA()()()(),e.TgZ(43,"ion-item")(44,"ion-input",10),e.NdJ("ngModelChange",function(i){return n.cep=i}),e.TgZ(45,"div",4),e._uU(46,"CEP"),e.TgZ(47,"ion-text",5),e._uU(48,"*"),e.qZA()()()(),e.TgZ(49,"ion-item")(50,"ion-input",11),e.NdJ("ngModelChange",function(i){return n.logradouro=i}),e.TgZ(51,"div",4),e._uU(52,"Logradouro"),e.TgZ(53,"ion-text",5),e._uU(54,"*"),e.qZA()()()(),e.TgZ(55,"ion-item")(56,"ion-input",12),e.NdJ("ngModelChange",function(i){return n.numero=i}),e.TgZ(57,"div",4),e._uU(58,"N\xfamero"),e.TgZ(59,"ion-text",5),e._uU(60,"*"),e.qZA()()(),e.TgZ(61,"ion-input",13),e.NdJ("ngModelChange",function(i){return n.bairro=i}),e.TgZ(62,"div",4),e._uU(63,"Bairro"),e.TgZ(64,"ion-text",5),e._uU(65,"*"),e.qZA()()()(),e.TgZ(66,"ion-item")(67,"ion-select",14),e.NdJ("ngModelChange",function(i){return n.estadoSelecionado=i})("ionChange",function(i){return n.onEstadoChange(i)})("click",function(){return n.verificaEstados()}),e.TgZ(68,"div",4),e._uU(69,"Estado"),e.TgZ(70,"ion-text",5),e._uU(71,"*"),e.qZA()(),e.YNc(72,S,2,2,"ion-select-option",15),e.qZA(),e.TgZ(73,"ion-select",16),e.NdJ("ngModelChange",function(i){return n.cidadeSelecionada_id=i})("click",function(){return n.verificaEstados()})("ionChange",function(i){return n.onCidadeChange(i)}),e.TgZ(74,"div",4),e._uU(75,"Cidade"),e.TgZ(76,"ion-text",5),e._uU(77,"*"),e.qZA()(),e.YNc(78,A,2,2,"ion-select-option",15),e.qZA()(),e.TgZ(79,"ion-item")(80,"ion-select",17),e.NdJ("ngModelChange",function(i){return n.situacao=i}),e.TgZ(81,"div",4),e._uU(82,"Cidade"),e.TgZ(83,"ion-text",5),e._uU(84,"*"),e.qZA()(),e.TgZ(85,"ion-select-option",18),e._uU(86,"Ativo"),e.qZA(),e.TgZ(87,"ion-select-option",19),e._uU(88,"Pendente"),e.qZA()(),e.TgZ(89,"ion-select",20),e.NdJ("ngModelChange",function(i){return n.nivel=i}),e.TgZ(90,"ion-select-option",18),e._uU(91,"Administrador"),e.qZA(),e.TgZ(92,"ion-select-option",21),e._uU(93,"Usu\xe1rio Comum"),e.qZA()()(),e.TgZ(94,"ion-button",22),e.NdJ("click",function(){return n.cadastrar()}),e._uU(95,"Cadastrar"),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngModel",n.nome),e.xp6(6),e.Q6J("maskito",n.cpfMask)("maskitoElement",n.maskPredicate)("ngModel",n.cpf),e.xp6(6),e.Q6J("maskito",n.telMask)("maskitoElement",n.maskPredicate)("ngModel",n.celular),e.xp6(6),e.Q6J("ngModel",n.email),e.xp6(6),e.Q6J("ngModel",n.senha),e.xp6(6),e.Q6J("ngModel",n.confirmaSenha),e.xp6(6),e.Q6J("ngModel",n.cep)("maskito",n.cepMask)("maskitoElement",n.maskPredicate),e.xp6(6),e.Q6J("ngModel",n.logradouro),e.xp6(6),e.Q6J("ngModel",n.numero),e.xp6(5),e.Q6J("ngModel",n.bairro),e.xp6(6),e.Q6J("ngModel",n.estadoSelecionado)("placeholder",n.estadoSelecionado),e.xp6(5),e.Q6J("ngForOf",n.estados),e.xp6(1),e.Q6J("disabled",n.selectDisabled)("ngModel",n.cidadeSelecionada_id)("placeholder",n.cidadeSelecionada),e.xp6(5),e.Q6J("ngForOf",n.cidades),e.xp6(2),e.Q6J("ngModel",n.situacao),e.xp6(9),e.Q6J("ngModel",n.nivel))},dependencies:[m.sg,g.JJ,g.Q7,g.On,l.YG,l.Sm,l.PM,l.W2,l.pK,l.Ie,l.t9,l.n0,l.yW,l.wd,l.sr,l.QI,l.j9,l.oU,C.ro]})}return s})()}];let J=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#a=this.\u0275mod=e.oAB({type:s});static#n=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(E),_.Bz]})}return s})(),b=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#a=this.\u0275mod=e.oAB({type:s});static#n=this.\u0275inj=e.cJS({imports:[m.ez,g.u5,l.Pc,C.U5,J]})}return s})()},2321:(Z,f,r)=>{r.d(f,{z:()=>_});var m=r(5861),g=r(6689),C=r(9862),l=r(6080);let _=(()=>{class d{constructor(h,u){this.http=h,this.utilsService=u,this.retorno={}}getAddres(h,u){var v=this;return(0,m.Z)(function*(){return v.http.get(`https://api.geoapify.com/v1/geocode/reverse?lat=${h}&lon=${u}&apiKey=e1c1fc95d3934d288f9fbadedeed9d1b`).toPromise()})()}getAddresByCEP(h){var u=this;return(0,m.Z)(function*(){return u.http.get(`https://viacep.com.br/ws/${h}/json/ `).toPromise()})()}static#e=this.\u0275fac=function(u){return new(u||d)(g.LFG(C.eN),g.LFG(l.FW))};static#a=this.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);