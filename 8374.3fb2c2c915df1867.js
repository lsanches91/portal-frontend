"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8374],{8374:(M,m,r)=>{r.r(m),r.d(m,{EditarUsuarioPageModule:()=>A});var p=r(6814),g=r(95),_=r(5233),l=r(3582),h=r(3044),d=r(5861),e=r(6689),c=r(4414),u=r(7696),U=r(83),P=r(9393),E=r(6080),T=r(2321);function Z(s,C){if(1&s&&(e.TgZ(0,"ion-select-option",19),e._uU(1),e.qZA()),2&s){const i=C.$implicit;e.s9C("value",i.sigla),e.xp6(1),e.Oqu(i.nome)}}function S(s,C){if(1&s&&(e.TgZ(0,"ion-select-option",19),e._uU(1),e.qZA()),2&s){const i=C.$implicit;e.s9C("value",i.id),e.xp6(1),e.Oqu(i.nome)}}const b=[{path:"",component:(()=>{class s{constructor(i,a,o,t,n,J,k,I){this.route=i,this.toastController=a,this.usuarioService=o,this.cidadeService=t,this.estadoService=n,this.utilsService=J,this.geolocalizacaoService=k,this.router=I,this.usuarioSelecionado={},this.novoUsuario={nome:"",cpf:"",celular:"",email:"",senha:"",confirmaSenha:"",cep:"",logradouro:"",bairro:"",numero:"",cidade_id:0,nivel:"C",situacao:"P"},this.estados=[],this.cidades=[],this.estadoSelecionado="",this.cidadeSelecionada="",this.cidadeSelecionada_id="",this.selectDisabled=!0,this.cpfMask={mask:[/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"-",/\d/,/\d/]},this.telMask={mask:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]},this.maskPredicate=function(){var f=(0,d.Z)(function*(v){return v.getInputElement()});return function(v){return f.apply(this,arguments)}}(),this.route.params.subscribe(f=>{f.id&&this.getSingleUsuario(+f.id)})}ngOnInit(){}verificaEstados(){var i=this;return(0,d.Z)(function*(){i.estadoService.getAll().then(function(){var a=(0,d.Z)(function*(o){0==o.length&&(i.utilsService.presentToast("Importando estados e cidades, isso pode demorar um pouco..."),yield i.estadoService.importEstados(),yield i.cidadeService.importCidades(),i.estados=o)});return function(o){return a.apply(this,arguments)}}()).catch(a=>{console.log(a)})})()}onEstadoChange(i){this.cidadeService.getCidadeByEstado(i.detail.value).then(o=>{this.cidades=o||{},this.cidadeSelecionada="",this.selectDisabled=!1}).catch(o=>{console.log(o)})}onCidadeChange(i){this.cidadeService.getCidadeById(i.detail.value).then(o=>{this.cidadeSelecionada=o.nome,console.log(this.cidadeSelecionada)}).catch(o=>{this.utilsService.presentToastError(o.error.error)})}buscarEndereco(){var i=this;return(0,d.Z)(function*(){if(""==i.novoUsuario.cep)i.utilsService.presentToastWarning("Preencha o CEP");else{let a=parseInt(i.novoUsuario.cep.replace(/\D/g,""));yield i.geolocalizacaoService.getAddresByCEP(a).then(function(){var o=(0,d.Z)(function*(t){i.novoUsuario.logradouro=t.logradouro,i.novoUsuario.bairro=t.bairro,yield i.cidadeService.getCidadeByNome(t.uf,t.localidade).then(n=>{i.cidadeSelecionada=n.nome,i.cidadeSelecionada_id=n.id,i.estadoSelecionado=n.estado_sigla,i.selectDisabled=!1})});return function(t){return o.apply(this,arguments)}}())}})()}getSingleUsuario(i){this.usuarioService.getSingleusuario(i).then(a=>{this.usuarioSelecionado=a,this.novoUsuario=this.usuarioSelecionado}).catch(a=>{console.log(a)})}putUsuario(i){this.camposValidos(i)&&this.usuarioService.update(this.usuarioSelecionado.id,this.novoUsuario).then(a=>{this.retorno=a,console.log(this.retorno),this.presentToast("Usuario editado com sucesso!")}).catch(a=>{console.log(a)})}enviaUsuario(){this.putUsuario(this.novoUsuario),setTimeout(()=>{this.voltaPagina()},1e3)}voltaPagina(){this.router.navigate(["perfil-usuario"])}camposValidos(i){for(const a in i)if(!i[a])return"string"==typeof i[a]&&i[a].trim(),!1;return!0}presentToast(i){var a=this;return(0,d.Z)(function*(){(yield a.toastController.create({message:i,duration:4e3,position:"top"})).present()})()}static#e=this.\u0275fac=function(a){return new(a||s)(e.Y36(h.gz),e.Y36(c.yF),e.Y36(u.i),e.Y36(U.F),e.Y36(P.s),e.Y36(E.FW),e.Y36(T.z),e.Y36(h.F0))};static#o=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-editar-usuario"]],decls:44,vars:20,consts:[["slot","start"],["default-href","#"],[3,"fullscreen"],["label","Nome*","labelPlacement","floating","placeholder","Insira o nome",3,"ngModel","ngModelChange"],["label","CPF*","labelPlacement","floating","placeholder","Insira o CPF",3,"maskito","maskitoElement","ngModel","ngModelChange"],["label","Celular*","labelPlacement","floating","placeholder","Insira o n\xfamero de celuar",3,"maskito","maskitoElement","ngModel","ngModelChange"],["label","Email*","labelPlacement","floating","placeholder","Insira o email","type","email",3,"ngModel","ngModelChange"],["label","CEP","labelPlacement","floating","placeholder","Insira o CEP",3,"ngModel","ngModelChange"],["label","Logradouro","labelPlacement","floating","placeholder","Insira a logradouro",3,"ngModel","ngModelChange"],["label","Bairro","labelPlacement","floating","placeholder","Insira a bairro",2,"width","150%",3,"ngModel","ngModelChange"],["label","Numero","labelPlacement","floating","placeholder","Insira o numero",3,"ngModel","ngModelChange"],["label-placement","floating",3,"ngModel","placeholder","ngModelChange","ionChange","click"],["slot","label"],["color","danger"],[3,"value",4,"ngFor","ngForOf"],["label-placement","floating",3,"disabled","ngModel","placeholder","ngModelChange","click","ionChange"],["size-lg","2","offset-lg","5","size-xs","12","offset-xs","0"],["size","default","expand","block",3,"click"],["size","default","expand","block","fill","outline",3,"click"],[3,"value"]],template:function(a,o){1&a&&(e.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),e._UZ(2,"ion-back-button",1),e.qZA(),e.TgZ(3,"ion-title"),e._uU(4,"Cadastro"),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-card")(7,"ion-item")(8,"ion-input",3),e.NdJ("ngModelChange",function(n){return o.novoUsuario.nome=n}),e.qZA()(),e.TgZ(9,"ion-item")(10,"ion-input",4),e.NdJ("ngModelChange",function(n){return o.novoUsuario.cpf=n}),e.qZA()(),e.TgZ(11,"ion-item")(12,"ion-input",5),e.NdJ("ngModelChange",function(n){return o.novoUsuario.celular=n}),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-input",6),e.NdJ("ngModelChange",function(n){return o.novoUsuario.email=n}),e.qZA()(),e.TgZ(15,"ion-item")(16,"ion-input",7),e.NdJ("ngModelChange",function(n){return o.novoUsuario.cep=n}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-input",8),e.NdJ("ngModelChange",function(n){return o.novoUsuario.logradouro=n}),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-input",9),e.NdJ("ngModelChange",function(n){return o.novoUsuario.bairro=n}),e.qZA(),e.TgZ(21,"ion-input",10),e.NdJ("ngModelChange",function(n){return o.novoUsuario.numero=n}),e.qZA()(),e.TgZ(22,"ion-item")(23,"ion-select",11),e.NdJ("ngModelChange",function(n){return o.estadoSelecionado=n})("ionChange",function(n){return o.onEstadoChange(n)})("click",function(){return o.verificaEstados()}),e.TgZ(24,"div",12),e._uU(25,"Estado"),e.TgZ(26,"ion-text",13),e._uU(27,"*"),e.qZA()(),e.YNc(28,Z,2,2,"ion-select-option",14),e.qZA()(),e.TgZ(29,"ion-item")(30,"ion-select",15),e.NdJ("ngModelChange",function(n){return o.cidadeSelecionada_id=n})("click",function(){return o.verificaEstados()})("ionChange",function(n){return o.onCidadeChange(n)}),e.TgZ(31,"div",12),e._uU(32,"Cidade"),e.TgZ(33,"ion-text",13),e._uU(34,"*"),e.qZA()(),e.YNc(35,S,2,2,"ion-select-option",14),e.qZA()()(),e.TgZ(36,"ion-row")(37,"ion-col",16)(38,"ion-button",17),e.NdJ("click",function(){return o.enviaUsuario()}),e._uU(39,"Salvar"),e.qZA()()(),e.TgZ(40,"ion-row")(41,"ion-col",16)(42,"ion-button",18),e.NdJ("click",function(){return o.voltaPagina()}),e._uU(43,"Voltar"),e.qZA()()()()),2&a&&(e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngModel",o.novoUsuario.nome),e.xp6(2),e.Q6J("maskito",o.cpfMask)("maskitoElement",o.maskPredicate)("ngModel",o.novoUsuario.cpf),e.xp6(2),e.Q6J("maskito",o.telMask)("maskitoElement",o.maskPredicate)("ngModel",o.novoUsuario.celular),e.xp6(2),e.Q6J("ngModel",o.novoUsuario.email),e.xp6(2),e.Q6J("ngModel",o.novoUsuario.cep),e.xp6(2),e.Q6J("ngModel",o.novoUsuario.logradouro),e.xp6(2),e.Q6J("ngModel",o.novoUsuario.bairro),e.xp6(1),e.Q6J("ngModel",o.novoUsuario.numero),e.xp6(2),e.Q6J("ngModel",o.estadoSelecionado)("placeholder",o.estadoSelecionado),e.xp6(5),e.Q6J("ngForOf",o.estados),e.xp6(2),e.Q6J("disabled",o.selectDisabled)("ngModel",o.cidadeSelecionada_id)("placeholder",o.cidadeSelecionada),e.xp6(5),e.Q6J("ngForOf",o.cidades))},dependencies:[p.sg,g.JJ,g.On,l.YG,l.Sm,l.PM,l.wI,l.W2,l.pK,l.Ie,l.Nd,l.t9,l.n0,l.yW,l.wd,l.sr,l.QI,l.j9,l.oU,_.ro]})}return s})()}];let y=(()=>{class s{static#e=this.\u0275fac=function(a){return new(a||s)};static#o=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(b),h.Bz]})}return s})(),A=(()=>{class s{static#e=this.\u0275fac=function(a){return new(a||s)};static#o=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[p.ez,g.u5,l.Pc,_.U5,y]})}return s})()},2321:(M,m,r)=>{r.d(m,{z:()=>h});var p=r(5861),g=r(6689),_=r(9862),l=r(6080);let h=(()=>{class d{constructor(c,u){this.http=c,this.utilsService=u,this.retorno={}}getAddres(c,u){var U=this;return(0,p.Z)(function*(){return U.http.get(`https://api.geoapify.com/v1/geocode/reverse?lat=${c}&lon=${u}&apiKey=e1c1fc95d3934d288f9fbadedeed9d1b`).toPromise()})()}getAddresByCEP(c){var u=this;return(0,p.Z)(function*(){return u.http.get(`https://viacep.com.br/ws/${c}/json/ `).toPromise()})()}static#e=this.\u0275fac=function(u){return new(u||d)(g.LFG(_.eN),g.LFG(l.FW))};static#o=this.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);