"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4403],{4403:(S,p,s)=>{s.r(p),s.d(p,{AtualizaAnimalPageModule:()=>z});var h=s(6814),u=s(95),t=s(3582),m=s(3044),d=s(5861),e=s(6689),A=s(4414),v=s(4781),f=s(8165),_=s(6448);function Z(a,g){if(1&a&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&a){const i=g.$implicit;e.s9C("value",i.id),e.xp6(1),e.Oqu(i.nome_comum)}}function T(a,g){if(1&a&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&a){const i=g.$implicit;e.s9C("value",i.id),e.xp6(1),e.Oqu(i.nome)}}const M=[{path:"",component:(()=>{class a{constructor(i,o,n,c,l,C){this.route=i,this.toastController=o,this.animalService=n,this.especieService=c,this.racaService=l,this.router=C,this.animalSelecionado={},this.novoAnimal={nome:"",idade:"",porte:"",descricao:"",situacao:"",foto_path:"",raca_id:"",ong_id:"",raca:{id:"",nome:"",especie_id:"",especie:{id:"",nome_comum:"",nome_cientifico:""}}},this.route.params.subscribe(r=>{r.id&&this.getSingleAnimal(+r.id)}),this.especieService.getAll().then(r=>{this.especies=r}).catch(r=>{console.log(r)}),this.racaService.getAll().then(r=>{this.racas=r}).catch(r=>{console.log(r)})}getSingleAnimal(i){this.animalService.getSingleAnimal(i).then(o=>{this.animalSelecionado=o,this.novoAnimal=this.animalSelecionado}).catch(o=>{console.log(o)})}putAnimal(i){var o=this;return(0,d.Z)(function*(){null!=o.arquivo&&""!=o.arquivo&&(yield o.uploadFilesToServer()),o.camposValidos(i)&&o.animalService.update(o.animalSelecionado.id,o.novoAnimal).then(n=>{o.retorno=n,o.presentToast("Animal atualizado com sucesso!")}).catch(n=>{console.log(n)})})()}enviaAnimal(){this.putAnimal({nome:this.novoAnimal.nome,idade:this.novoAnimal.idade,porte:this.novoAnimal.porte,situacao:this.novoAnimal.situacao,foto_path:this.novoAnimal.foto_path,descricao:this.novoAnimal.descricao,ong_id:this.novoAnimal.ong_id,raca_id:this.novoAnimal.raca_id}),setTimeout(()=>{this.voltaPagina()},1e3)}voltaPagina(){this.router.navigate([`ong-info/${this.animalSelecionado.ong_id}`])}camposValidos(i){for(const o in i)if(!i[o])return"string"==typeof i[o]&&i[o].trim(),!1;return!0}onEspecieChange(i){this.racaService.getRacaByEspecie(i.detail.value).then(n=>{this.racas=n||{},this.novoAnimal.raca.nome=""}).catch(n=>{console.log(n)})}onUpload(i){this.arquivo=i.target.files}uploadFilesToServer(){var i=this;return(0,d.Z)(function*(){const o=new FormData;o.append("arquivo",i.arquivo[0]);try{let n=yield i.animalService.uploadArquivo(o);return null!=n&&(i.novoAnimal.foto_path=n.filename),n}catch(n){console.log(n),i.presentToast("N\xe3o foi possivel fazer o upload do arquivo!")}})()}presentToast(i){var o=this;return(0,d.Z)(function*(){(yield o.toastController.create({message:i,duration:4e3,position:"top"})).present()})()}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(m.gz),e.Y36(A.yF),e.Y36(v.L),e.Y36(f.I),e.Y36(_.v),e.Y36(m.F0))};static#n=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-atualiza-animal"]],decls:48,vars:15,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["slot","icon-only","name","star"],["size","large"],[2,"padding","15px"],["fill","solid","label","Nome","labelPlacement","stacked","type","text","maxlength","50",3,"counter","ngModel","ngModelChange"],["fill","solid","label","Esp\xe9cie","interface","popover","labelPlacement","stacked",3,"ngModel","placeholder","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["fill","solid","label","Ra\xe7a","interface","popover","labelPlacement","stacked",3,"ngModel","placeholder","ngModelChange"],["fill","solid","label","Idade","interface","popover","labelPlacement","stacked",3,"ngModel","ngModelChange"],["value","Filhote"],["value","Adulto"],["value","Idoso"],["fill","solid","label","Porte","interface","popover","labelPlacement","stacked",3,"ngModel","ngModelChange"],["value","Pequeno"],["value","M\xe9dio"],["value","Grande"],["position","stacked"],["type","file","name","foto_path",3,"change"],["fill","solid","label","Descri\xe7\xe3o","labelPlacement","stacked","type","text","maxlength","200",3,"counter","autoGrow","ngModel","ngModelChange"],["size","default","expand","block",3,"click"],["size","default","expand","block","fill","outline",3,"click"],[3,"value"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Atualizando Animal"),e.qZA()()(),e.TgZ(6,"ion-content",2)(7,"ion-header",3)(8,"ion-toolbar")(9,"ion-button"),e._UZ(10,"ion-icon",4),e.qZA(),e.TgZ(11,"ion-title",5),e._uU(12,"Atualizando Animal"),e.qZA()()(),e.TgZ(13,"ion-card",6)(14,"ion-item")(15,"ion-input",7),e.NdJ("ngModelChange",function(l){return n.novoAnimal.nome=l}),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-select",8),e.NdJ("ngModelChange",function(l){return n.novoAnimal.raca.especie_id=l})("ionChange",function(l){return n.onEspecieChange(l)}),e.YNc(18,Z,2,2,"ion-select-option",9),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-select",10),e.NdJ("ngModelChange",function(l){return n.novoAnimal.raca_id=l}),e.YNc(21,T,2,2,"ion-select-option",9),e.qZA()(),e.TgZ(22,"ion-item")(23,"ion-select",11),e.NdJ("ngModelChange",function(l){return n.novoAnimal.idade=l}),e.TgZ(24,"ion-select-option",12),e._uU(25,"Filhote"),e.qZA(),e.TgZ(26,"ion-select-option",13),e._uU(27,"Adulto"),e.qZA(),e.TgZ(28,"ion-select-option",14),e._uU(29,"Idoso"),e.qZA()()(),e.TgZ(30,"ion-item")(31,"ion-select",15),e.NdJ("ngModelChange",function(l){return n.novoAnimal.porte=l}),e.TgZ(32,"ion-select-option",16),e._uU(33,"Pequeno"),e.qZA(),e.TgZ(34,"ion-select-option",17),e._uU(35,"M\xe9dio"),e.qZA(),e.TgZ(36,"ion-select-option",18),e._uU(37,"Grande"),e.qZA()()(),e.TgZ(38,"ion-item")(39,"ion-label",19),e._uU(40,"Foto"),e.qZA(),e.TgZ(41,"input",20),e.NdJ("change",function(l){return n.onUpload(l)}),e.qZA()(),e.TgZ(42,"ion-item")(43,"ion-textarea",21),e.NdJ("ngModelChange",function(l){return n.novoAnimal.descricao=l}),e.qZA()(),e.TgZ(44,"ion-button",22),e.NdJ("click",function(){return n.enviaAnimal()}),e._uU(45," Enviar "),e.qZA(),e.TgZ(46,"ion-button",23),e.NdJ("click",function(){return n.voltaPagina()}),e._uU(47," Voltar "),e.qZA()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(9),e.Q6J("counter",!0)("ngModel",n.novoAnimal.nome),e.xp6(2),e.Q6J("ngModel",n.novoAnimal.raca.especie_id)("placeholder",n.novoAnimal.raca.especie.nome_comum),e.xp6(1),e.Q6J("ngForOf",n.especies),e.xp6(2),e.Q6J("ngModel",n.novoAnimal.raca_id)("placeholder",n.novoAnimal.raca.nome),e.xp6(1),e.Q6J("ngForOf",n.racas),e.xp6(2),e.Q6J("ngModel",n.novoAnimal.idade),e.xp6(8),e.Q6J("ngModel",n.novoAnimal.porte),e.xp6(12),e.Q6J("counter",!0)("autoGrow",!0)("ngModel",n.novoAnimal.descricao))},dependencies:[h.sg,u.JJ,u.nD,u.On,t.YG,t.Sm,t.PM,t.W2,t.Gu,t.gu,t.pK,t.Ie,t.Q$,t.fG,t.t9,t.n0,t.g2,t.wd,t.sr,t.QI,t.j9]})}return a})()}];let P=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#n=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(M),m.Bz]})}return a})(),z=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#n=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[h.ez,u.u5,t.Pc,P]})}return a})()}}]);