"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7230],{7230:(P,g,l)=>{l.r(g),l.d(g,{ListarDenunciaPageModule:()=>O});var d=l(6814),_=l(95),a=l(3582),p=l(3044),r=l(5861),e=l(6689),m=l(9003),f=l(7696),h=l(6975),Z=l(6080);function x(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-fab-button",22),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,s=e.oxw();return e.KtG(s.bloqueiaOng(t.ong))}),e._UZ(1,"ion-icon",23),e.qZA()}}function T(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-fab",13)(4,"ion-fab-button",14),e._UZ(5,"ion-icon",15),e.qZA(),e.TgZ(6,"ion-fab-list",16),e.YNc(7,x,2,0,"ion-fab-button",17),e.TgZ(8,"ion-fab-button",18),e.NdJ("click",function(){const s=e.CHM(n).$implicit,u=e.oxw();return e.KtG(u.confirmaExclusao(s))}),e._UZ(9,"ion-icon",19),e.qZA(),e.TgZ(10,"ion-fab-button",20),e.NdJ("click",function(){const s=e.CHM(n).$implicit,u=e.oxw();return e.KtG(u.visualizarDenunciaSelecionada(s.id))}),e._UZ(11,"ion-icon",21),e.qZA()()()()}if(2&o){const n=c.$implicit;e.xp6(2),e.AsE("",n.ong.nome_fantasia," - ",n.mensagem,""),e.xp6(5),e.Q6J("ngIf","Aprovada"===n.ong.situacao)}}function v(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Visualizar Den\xfancia"),e.qZA()()(),e.TgZ(4,"ion-content",24)(5,"ion-card",25)(6,"ion-item"),e._UZ(7,"ion-input",26),e.qZA(),e.TgZ(8,"ion-item"),e._UZ(9,"ion-input",27),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-textarea",28),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"ion-button",29),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.openVisualizarDenuncia(!1))}),e._uU(14," Voltar "),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(7),e.s9C("value",n.denunciaSelecionada.usuario.nome),e.Q6J("disabled",!0),e.xp6(2),e.s9C("value",n.denunciaSelecionada.ong.nome_fantasia),e.Q6J("disabled",!0),e.xp6(2),e.s9C("value",n.denunciaSelecionada.mensagem),e.Q6J("disabled",!0)}}function D(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.nome)}}function b(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.nome_fantasia)}}function A(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Atualizar Den\xfancia"),e.qZA()()(),e.TgZ(4,"ion-content",24)(5,"ion-card",25)(6,"ion-item")(7,"ion-select",30),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.denunciaSelecionada.usuario.id=t)}),e.TgZ(8,"div",31),e._uU(9,"Usu\xe1rio"),e.TgZ(10,"ion-text",32),e._uU(11,"*"),e.qZA()(),e.YNc(12,D,2,2,"ion-select-option",33),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-select",30),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.denunciaSelecionada.ong.id=t)}),e.TgZ(15,"div",31),e._uU(16,"ONG"),e.TgZ(17,"ion-text",32),e._uU(18,"*"),e.qZA()(),e.YNc(19,b,2,2,"ion-select-option",33),e.qZA()(),e.TgZ(20,"ion-item"),e._UZ(21,"ion-textarea",28),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"ion-button",6),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.atualizaDenuncia())}),e._uU(24," Enviar "),e.qZA(),e.TgZ(25,"ion-button",29),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.openAtualizarDenuncia(!1))}),e._uU(26," Voltar "),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(7),e.Q6J("ngModel",n.denunciaSelecionada.usuario.id)("placeholder",n.denunciaSelecionada.usuario.nome),e.xp6(5),e.Q6J("ngForOf",n.usuarios),e.xp6(2),e.Q6J("ngModel",n.denunciaSelecionada.ong.id)("placeholder",n.denunciaSelecionada.ong.nome_fantasia),e.xp6(5),e.Q6J("ngForOf",n.ongs),e.xp6(2),e.s9C("value",n.denunciaSelecionada.mensagem),e.Q6J("disabled",!1)}}function S(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.nome)}}function M(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",34),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.nome_fantasia)}}function C(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Adicionar Den\xfancia"),e.qZA()()(),e.TgZ(4,"ion-content",24)(5,"ion-card",25)(6,"ion-item")(7,"ion-select",30),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.usuarioSelecionado.id=t)}),e.TgZ(8,"div",31),e._uU(9,"Usu\xe1rio"),e.TgZ(10,"ion-text",32),e._uU(11,"*"),e.qZA()(),e.YNc(12,S,2,2,"ion-select-option",33),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-select",30),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.ongSelecionada.id=t)}),e.TgZ(15,"div",31),e._uU(16,"ONG"),e.TgZ(17,"ion-text",32),e._uU(18,"*"),e.qZA()(),e.YNc(19,M,2,2,"ion-select-option",33),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-textarea",35),e.NdJ("ngModelChange",function(t){e.CHM(n);const s=e.oxw();return e.KtG(s.novaMensagem=t)}),e.qZA()(),e._UZ(22,"br"),e.TgZ(23,"ion-button",6),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.criaDenuncia())}),e._uU(24," Enviar "),e.qZA(),e.TgZ(25,"ion-button",29),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.openAdicionarDenuncia(!1))}),e._uU(26," Voltar "),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(7),e.Q6J("ngModel",n.usuarioSelecionado.id)("placeholder",n.usuarioSelecionado.nome),e.xp6(5),e.Q6J("ngForOf",n.usuarios),e.xp6(2),e.Q6J("ngModel",n.ongSelecionada.id)("placeholder",n.ongSelecionada.nome_fantasia),e.xp6(5),e.Q6J("ngForOf",n.ongs),e.xp6(2),e.Q6J("ngModel",n.novaMensagem)("disabled",!1)}}const U=[{path:"",component:(()=>{class o{constructor(n,i,t,s){this.denunciaService=n,this.usuarioService=i,this.ongService=t,this.utilsService=s,this.denuncias=[],this.ongs=[],this.usuarios=[],this.denunciaSelecionada={usuario:{},ong:{}},this.novaDenuncia={},this.usuarioSelecionado={id:0,nome:""},this.ongSelecionada={id:0,nome_fantasia:""},this.novaMensagem="",this.isModalVisualizarOpen=!1,this.isModalAtualizarOpen=!1,this.isModalAdicionarOpen=!1,this.listarDenuncias(),this.listarUsuarios(),this.listarOngs()}ngOnInit(){}listarDenuncias(){this.denunciaService.getAll().then(n=>{console.log(n),this.denuncias=n}).catch(n=>{console.log(n)})}listarUsuarios(){this.usuarioService.getAll().then(n=>{this.usuarios=n}).catch(n=>{console.log(n)})}listarOngs(){this.ongService.getAll().then(n=>{this.ongs=n}).catch(n=>{console.log(n)})}postDenuncia(n){var i=this;return(0,r.Z)(function*(){let t;return i.camposValidos(n)?yield i.denunciaService.create(n).then(s=>{i.retorno=s,console.log(i.retorno),t=!0}).catch(s=>{i.utilsService.presentToastError(s.error.error),t=!1}):(i.utilsService.presentToastWarning("Campos inv\xe1lidos."),t=!1),t})()}getDenunciaById(n){var i=this;return(0,r.Z)(function*(){i.denunciaService.getDenunciaById(n).then(t=>{i.denunciaSelecionada=t}).catch(t=>{console.log(t)})})()}putDenuncia(n){var i=this;return(0,r.Z)(function*(){i.camposValidos(n)?i.denunciaService.update(n.ong.id,n.usuario.id,n.id,n).then(t=>{i.retorno=t}).catch(t=>{console.log(t)}):i.utilsService.presentToastWarning("Informa\xe7\xf5es inv\xe1lidas.")})()}deleteDenuncia(n){var i=this;return(0,r.Z)(function*(){i.denunciaService.delete(n.ong.id,n.usuario.id,n.id).then(t=>{i.retorno=t,console.log(i.retorno),i.utilsService.presentToastSuccess("Denuncia exclu\xedda com sucesso!"),setTimeout(()=>{window.location.reload()},1e3)}).catch(t=>{console.log(t)})})()}listarPorUsuario(){}listarPorONG(){}openAdicionarDenuncia(n){this.isModalAdicionarOpen=n}openVisualizarDenuncia(n){this.isModalVisualizarOpen=n}openAtualizarDenuncia(n){this.isModalAtualizarOpen=n}bloqueiaOng(n){var i=this;return(0,r.Z)(function*(){console.log(n),yield(yield i.utilsService.alertController.create({header:"Confirmar bloqueio da ONG "+n.nome_fantasia+"?",buttons:[{text:"N\xe3o"},{text:"Sim",handler:()=>{i.ongService.getSingleOng(n.id).then(s=>{const u=s;u.situacao="Bloqueada",i.ongService.update(u.id,u).then(()=>{i.utilsService.presentToastSuccess("ONG bloqueada com sucesso!"),setTimeout(()=>{window.location.reload()},1e3)}).catch(J=>{console.log(J)})}).catch(s=>{console.log(s)})}}]})).present()})()}atualizaDenuncia(){this.putDenuncia({id:this.denunciaSelecionada.id,usuario_id:this.denunciaSelecionada.usuario.id,denuncia_id:this.denunciaSelecionada.ong.id,mensagem:this.denunciaSelecionada.mensagem}),this.utilsService.presentToastSuccess("Den\xfancia atualizada com sucesso!"),setTimeout(()=>{this.openAtualizarDenuncia(!1),window.location.reload()},500)}criaDenuncia(){var n=this;return(0,r.Z)(function*(){if(n.novaDenuncia={usuario_id:n.usuarioSelecionado.id,ong_id:n.ongSelecionada.id,mensagem:n.novaMensagem},n.camposValidos(n.novaDenuncia)){const i=yield n.postDenuncia(n.novaDenuncia);console.log(i),i&&(n.utilsService.presentToastSuccess("Den\xfancia cadastrada com sucesso!"),setTimeout(()=>{window.location.reload()},1e3))}else n.utilsService.presentToastWarning("Campos inv\xe1lidos.")})()}confirmaExclusao(n){var i=this;return(0,r.Z)(function*(){yield(yield i.utilsService.alertController.create({header:"Confirmar exclus\xe3o?",buttons:[{text:"N\xe3o"},{text:"Sim",handler:()=>{i.deleteDenuncia(n)}}]})).present()})()}atualizarDenunciaSelecionada(n){var i=this;return(0,r.Z)(function*(){yield i.getDenunciaById(n),i.openAtualizarDenuncia(!0)})()}visualizarDenunciaSelecionada(n){var i=this;return(0,r.Z)(function*(){yield i.getDenunciaById(n),i.openVisualizarDenuncia(!0)})()}camposValidos(n){for(const i in n)if(!n[i])return"string"==typeof n[i]&&n[i].trim(),!1;return!0}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(m.t),e.Y36(f.i),e.Y36(h.r),e.Y36(Z.FW))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-listar-denuncia"]],decls:39,vars:10,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["size-lg","4","offset-lg","4","size-xs","12","offset-xs","0"],["size","default","expand","block"],["size","default","expand","block",3,"click"],["slot","start","name","add-circle-outline"],["size-lg","6","offset-lg","3","size-xs","12","offset-xs","0"],[3,"inset"],["lines","full"],[4,"ngFor","ngForOf"],[3,"isOpen","backdropDismiss"],["horizontal","end"],["size","small","color","secondary"],["name","add"],["side","start"],["title","Bloquear ONG","color","success",3,"click",4,"ngIf"],["color","danger",3,"click"],["name","trash-outline"],["color","primary",3,"click"],["name","eye-outline"],["title","Bloquear ONG","color","success",3,"click"],["name","close-circle-outline"],[1,"ion-padding"],[2,"padding","15px"],["label","usuario","labelPlacement","stacked",3,"value","disabled"],["label","ONG","labelPlacement","stacked",3,"value","disabled"],["rows","4","label","Mensagem","labelPlacement","stacked",3,"value","disabled"],["size","default","expand","block","fill","outline",3,"click"],["label-placement","floating",3,"ngModel","placeholder","ngModelChange"],["slot","label"],["color","danger"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","4","label","Mensagem","labelPlacement","stacked",3,"ngModel","disabled","ngModelChange"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Listar Den\xfancias"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Den\xfancias"),e.qZA()()(),e.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",4)(12,"ion-row")(13,"ion-col")(14,"ion-button",5),e._uU(15," Listar por ONG "),e.qZA()(),e.TgZ(16,"ion-col")(17,"ion-button",5),e._uU(18," Listar por Usu\xe1rio "),e.qZA()()()()(),e.TgZ(19,"ion-row")(20,"ion-col",4)(21,"ion-row")(22,"ion-col")(23,"ion-button",6),e.NdJ("click",function(){return t.openAdicionarDenuncia(!0)}),e._UZ(24,"ion-icon",7),e._uU(25," Adicionar "),e.qZA()()()()(),e.TgZ(26,"ion-row")(27,"ion-col",8)(28,"ion-list",9)(29,"ion-list-header",10)(30,"ion-label"),e._uU(31,"Den\xfancias"),e.qZA()(),e.YNc(32,T,12,3,"ion-item",11),e.qZA()()()(),e.TgZ(33,"ion-modal",12),e.YNc(34,v,15,6,"ng-template"),e.qZA(),e.TgZ(35,"ion-modal",12),e.YNc(36,A,27,8,"ng-template"),e.qZA(),e.TgZ(37,"ion-modal",12),e.YNc(38,C,27,8,"ng-template"),e.qZA()()),2&i&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(24),e.Q6J("inset",!0),e.xp6(4),e.Q6J("ngForOf",t.denuncias),e.xp6(1),e.Q6J("isOpen",t.isModalVisualizarOpen)("backdropDismiss",!1),e.xp6(2),e.Q6J("isOpen",t.isModalAtualizarOpen)("backdropDismiss",!1),e.xp6(2),e.Q6J("isOpen",t.isModalAdicionarOpen)("backdropDismiss",!1))},dependencies:[d.sg,d.O5,_.JJ,_.On,a.YG,a.PM,a.wI,a.W2,a.IJ,a.W4,a.zq,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.yh,a.Nd,a.t9,a.n0,a.yW,a.g2,a.wd,a.sr,a.ki,a.QI,a.j9],styles:["ion-fab-button[_ngcontent-%COMP%]{margin:15px}"]})}return o})()}];let q=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(U),p.Bz]})}return o})(),O=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[d.ez,_.u5,a.Pc,q]})}return o})()}}]);